[tox]
skipsdist = True

[globals]
lint_files = setup.py snaphelpers

[testenv]
deps =
    .
    .[testing]
commands =
    {envbindir}/pytest {posargs}

[testenv:format]
deps =
    isort
    yapf
commands =
    {envbindir}/yapf --in-place --recursive {[globals]lint_files}
    {envbindir}/isort --recursive {[globals]lint_files}

[testenv:lint]
deps =
    flake8
    isort
    yapf
commands =
    {envbindir}/yapf --diff --recursive {[globals]lint_files}
    {envbindir}/isort --check-only --diff --recursive {[globals]lint_files}
    {envbindir}/flake8 {[globals]lint_files}

[testenv:check]
deps =
    mypy
commands =
    {envbindir}/mypy -p snaphelpers {posargs}

[testenv:coverage]
deps =
    .
    .[testing]
    pytest-cov
commands =
    {envbindir}/pytest --cov {posargs}

[testenv:docs]
deps =
    .
    sphinx
    sphinx-autodoc-typehints
commands =
    sphinx-build -b html docs html {posargs}
